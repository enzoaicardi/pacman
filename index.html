<!DOCTYPE html>
<html lang="fr">
<head>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cours JS - Pacman</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rye&family=Sancreek&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="./css/scene.css">
    <link rel="stylesheet" href="./css/board.css">
    <link rel="stylesheet" href="./css/entity.css">
    <link rel="stylesheet" href="./css/scoreboard.css">
    <link rel="stylesheet" href="./css/header.css">
    <link rel="stylesheet" href="./css/footer.css">
    <link rel="stylesheet" href="./css/modal.css">
    <link rel="stylesheet" href="./css/controls.css">

    <script type="module" src="./js/game.js" defer></script>

</head>
<body>

    <game-scene>

        <h1>Pacman</h1>

        <header>

            <img src="./img/cactus.svg">
            
            <game-scoreboard>
                <p>Score</p>
                <p><span class="game-score"></span> / <span class="game-goal"></span></p>
            </game-scoreboard>

            <img src="./img/cactus.svg">

        </header>

        <game-board>

            <!-- auto generate pacman and wrapper -->

            <game-modal>

                <div class="win lose">
    
                    <img class="lose" src="./img/prison.svg">
                    <h2 class="title lose">GAME OVER</h2>
                    <p class="text lose">Vous avez perdu</p>
    
                    <img class="win" src="./img/star.svg">
                    <h2 class="title win">PACMAN</h2>
                    <p class="text win">Vous avez gagn√©</p>
    
                </div>
    
                <div class="pause">
    
                    <img class="big" src="./img/clock.svg">
                    <h2 class="title">PAUSE</h2>
                    <p class="text">Danse pied tendre !</p>
    
                    <button class="button" onclick="game.play();">
                        <p>Reprendre</p>
                    </button>
    
                </div>

            </game-modal>

        </game-board>

        <footer>

            <div class="difficulty">
                <img src="./img/pistol.svg">
                <p class="setter" data-speed="400">Facile</p>
                <p class="setter selected" data-speed="300">Normale</p>
                <p class="setter" data-speed="200">Difficile</p>
                <p class="setter" data-speed="100">Extreme</p>
            </div>

            <div class="maps">
                <button class="button" onclick="game.start(0);">
                    <p>Starter</p>
                </button>
                <button class="button" onclick="game.start(1);">
                    <p>Classic</p>
                </button>
                <button class="button" onclick="game.start(2);">
                    <p>Saloon</p>
                </button>
                <button class="button" onclick="game.start(3);">
                    <p>Cactus</p>
                </button>
                <button class="button" onclick="game.start(4);">
                    <p>Chapeau</p>
                </button>
                <button class="button" onclick="game.start(5);">
                    <p>Charette</p>
                </button>
                <button class="button" onclick="game.start(6);">
                    <p>Forterresse</p>
                </button>
                <button class="button" onclick="game.start(7);">
                    <p>Tipi</p>
                </button>
                <button class="button" onclick="game.start(8);">
                    <p>Football</p>
                </button>
            </div>

            <div class="quantity">
                <img class="lose" src="./img/ghost.svg">
                <input type="text" value="4">
                <button onclick="game.setGhosts(Number(this.previousElementSibling.value))">OK</button>
            </div>
            
        </footer>

    </game-scene>

    <game-controls>
        <div data-direction="up"></div>
        <div data-direction="right"></div>
        <div data-direction="down"></div>
        <div data-direction="left"></div>
    </game-controls>

    <game-sound>
        <svg class="muted" viewBox="0 0 32 32">
            <path d="M30 19.348v2.652h-2.652l-3.348-3.348-3.348 3.348h-2.652v-2.652l3.348-3.348-3.348-3.348v-2.652h2.652l3.348 3.348 3.348-3.348h2.652v2.652l-3.348 3.348 3.348 3.348z"></path>
            <path d="M13 30c-0.26 0-0.516-0.102-0.707-0.293l-7.707-7.707h-3.586c-0.552 0-1-0.448-1-1v-10c0-0.552 0.448-1 1-1h3.586l7.707-7.707c0.286-0.286 0.716-0.372 1.090-0.217s0.617 0.519 0.617 0.924v26c0 0.404-0.244 0.769-0.617 0.924-0.124 0.051-0.254 0.076-0.383 0.076z"></path>
        </svg>
        <svg class="sound" viewBox="0 0 32 32">
            <path d="M22.485 25.985c-0.384 0-0.768-0.146-1.061-0.439-0.586-0.586-0.586-1.535 0-2.121 4.094-4.094 4.094-10.755 0-14.849-0.586-0.586-0.586-1.536 0-2.121s1.536-0.586 2.121 0c2.55 2.55 3.954 5.94 3.954 9.546s-1.404 6.996-3.954 9.546c-0.293 0.293-0.677 0.439-1.061 0.439v0zM17.157 23.157c-0.384 0-0.768-0.146-1.061-0.439-0.586-0.586-0.586-1.535 0-2.121 2.534-2.534 2.534-6.658 0-9.192-0.586-0.586-0.586-1.536 0-2.121s1.535-0.586 2.121 0c3.704 3.704 3.704 9.731 0 13.435-0.293 0.293-0.677 0.439-1.061 0.439z"></path>
            <path d="M13 30c-0.26 0-0.516-0.102-0.707-0.293l-7.707-7.707h-3.586c-0.552 0-1-0.448-1-1v-10c0-0.552 0.448-1 1-1h3.586l7.707-7.707c0.286-0.286 0.716-0.372 1.090-0.217s0.617 0.519 0.617 0.924v26c0 0.404-0.244 0.769-0.617 0.924-0.124 0.051-0.254 0.076-0.383 0.076z"></path>
        </svg>
    </game-sound>

    <script>
        const game = document.querySelector('game-scene');
        const levels = game.querySelectorAll('.difficulty .setter');
        const sound = document.querySelector('game-sound');
        let deleted_sound;

        levels.forEach(setter =>{

            setter.addEventListener('click', ()=>{

                levels.forEach(setter => {
                    setter.classList.remove('selected');
                });

                setter.classList.add('selected');
                game.speed = Number(setter.dataset.speed);

            });

        })

        sound.addEventListener('click', ()=>{
            sound.classList.toggle('muted');
            if(game.western_music){
                game.stopMusic();
                deleted_sound = game.western_music;
                game.western_music = false;
            } else {
                game.western_music = deleted_sound;
                game.playMusic();
            }
        });
    </script>


</body>
</html>